(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{7110:function(e,t,r){Promise.resolve().then(r.t.bind(r,8173,23)),Promise.resolve().then(r.t.bind(r,231,23)),Promise.resolve().then(r.bind(r,6665)),Promise.resolve().then(r.bind(r,517)),Promise.resolve().then(r.t.bind(r,7122,23)),Promise.resolve().then(r.t.bind(r,308,23)),Promise.resolve().then(r.bind(r,6419))},517:function(e,t,r){"use strict";r.d(t,{default:function(){return m}});var o=r(7437),a=r(7138),s=r(2265),n=r(6648);let i=e=>{let{Imagen:t}=e;return(0,o.jsx)(n.default,{src:t.src,alt:"Boton de Pagos",className:" px-4 py-2 rounded transition-transform transform duration-200 hover:scale-105 max-w-80",width:250,height:100})};var l={src:"/_next/static/media/boton Pagos.51138f88.svg",height:356,width:1577,blurWidth:0,blurHeight:0},c={src:"/_next/static/media/boton_Plataform.3dceff37.svg",height:356,width:1577,blurWidth:0,blurHeight:0},u=r(1270),d=()=>{let{userData:e}=(0,u.useAuth)(),[t,r]=(0,s.useState)(""),[a,n]=(0,s.useState)(!1),i=(0,s.useRef)(null),l=e=>e&&""!==e.trim()?e.trim().charAt(0).toUpperCase():'<i className="lni lni-user"></i>';(0,s.useEffect)(()=>{(null==e?void 0:e.userData)&&r(l(null==e?void 0:e.userData.nombre))},[e]);let c=()=>{n(!a)},d=e=>{i.current&&!i.current.contains(e.target)&&n(!1)};return(0,s.useEffect)(()=>(document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}),[]),(0,o.jsx)("div",{className:"relative",ref:i,children:(0,o.jsxs)("div",{className:"flex items-center justify-center text-center space-x-4 cursor-pointer",children:[(0,o.jsx)("div",{className:"flex flex-col text-end "}),e&&"https://exmple-image.webp"!==e.userData.imgUrl?(0,o.jsx)("img",{src:e.userData.imgUrl,alt:e.userData.nombre,className:"w-12 h-12 rounded-full",onClick:c}):(0,o.jsx)("button",{id:"dropdownNavbarLink",onClick:c,className:"rounded-full w-12 h-12 flex items-center justify-center text-center font-[530] ".concat(e&&(({A:"bg-red-500",B:"bg-blue-500",C:"bg-green-500",D:"bg-yellow-500",E:"bg-purple-500",F:"bg-pink-500",G:"bg-indigo-500",H:"bg-teal-500",I:"bg-orange-500",J:"bg-cyan-500",K:"bg-lime-500",L:"bg-amber-500",M:"bg-emerald-500",N:"bg-violet-500",O:"bg-fuchsia-500",P:"bg-rose-500",Q:"bg-sky-500",R:"bg-blue-600",S:"bg-red-600",T:"bg-green-600",U:"bg-yellow-600",V:"bg-purple-600",W:"bg-pink-600",X:"bg-indigo-600",Y:"bg-teal-600",Z:"bg-orange-600"})[l(e.userData.nombre)]||"bg-gray-500")," text-white"),children:(0,o.jsx)("p",{className:"text-3xl pr-[1px]",children:t})})]})})},m=()=>{let{userData:e}=(0,u.useAuth)(),t=null==e?void 0:e.tokenData.token;return(0,o.jsx)(o.Fragment,{children:t?(0,o.jsx)(a.default,{href:"/dashboard/home",children:(0,o.jsxs)("div",{className:"ml-auto flex  items-center  w-60",children:[(0,o.jsx)(i,{Imagen:c}),(0,o.jsx)(d,{})]})}):(0,o.jsx)(a.default,{href:"/login/1",children:(0,o.jsx)("div",{className:"ml-auto flex  items-center  w-60",children:(0,o.jsx)(i,{Imagen:l})})})})}},6419:function(e,t,r){"use strict";r.d(t,{default:function(){return g}});var o=r(7437),a=r(1270);let s=e=>{let t={};return e.email.trim().length<1?t.email="El campo username es obligatorio":/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.email)||(t.email="Car\xe1cter no admitido"),e.password&&e.password.trim().length<1?t.password="El campo password es obligatorio":/^[A-Za-z0-9@$!%*?&]+$/.test(e.password)||(t.password="Car\xe1cter no admitido"),t};var n=r(5634),i=r(7138),l=r(2265),c=r(4379),u=r.n(c),d={src:"/_next/static/media/iconGoogle.aa4f9068.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA9klEQVR42mMAgb9xKur/vdWO/PFS/X/bXvH/dTvFY7fslcwYQOAfg4b6Pwv1L0AF//96qc676ai36LqD1v/rjsZVDCDw/xT74f9zpP7/Y9DSYoCC/wwMTAww8O8aw/8/dxnngyW2M7Do1DyezlD/Yr9Y7dNNErVPVzH8v8rw//81BoiC/wzMYnVPdsvUPnkhXvv0v2jds/8MHy+KHN502OQ/w0p/uBXiZX/URWuf/RerfXaEgWGdlzrDBo8vQpvd/wtuDJjPO5dhvnDX5v9iNa++ijbc12QAAf+tLuqCm92PCG50/88/2/g//9TUo2I17zUYGBgYACgWZ8V2tNnoAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},m=r(6648),h=r(6463),g=()=>{let{login:e}=(0,a.useAuth)();console.log("pathname: ",(0,h.usePathname)());let[t,r]=(0,l.useState)({email:"",password:""}),[c,g]=(0,l.useState)({email:"",password:""}),p=e=>{let{name:o,value:a}=e.target;r({...t,[o]:a});let n=s({...t,[o]:a});g({...c,[o]:n[o]})},f=async o=>{o.preventDefault();try{let o=await (0,n.l)(t),{token:a}=o;if(a){r({email:"",password:""});let a=await (0,n.pH)(o.user.id,o.token),s={...o,keyProperty:t.password};a&&(e({tokenData:s,userData:a}),u().fire({title:"\xa1Acceso exitoso!",html:'  <h1 style="color:gray; font-size:25px; font-weight: 500;" > Bienvenido(a):</h1>\n				  		   <p style="margin-top:10px">'.concat(a.email,'</p> \n                           <p style="font-size:20px">').concat(a.nombre," </p>	\n                   "),icon:"success",showCancelButton:!1,confirmButtonColor:"#3085d6",confirmButtonText:"Ok"}))}}catch(t){let e=t.message;u().fire({icon:"error",title:"Oops...",text:e})}},w=async()=>{window.location.href=n.QH+n.zm};return(0,o.jsx)("div",{className:" mt-[30%] w-96 h-80 overflow-hidden bg-gray-100 rounded-xl shadow-2xl p-4 ",children:(0,o.jsxs)("div",{children:[(0,o.jsxs)("form",{onSubmit:f,className:"px-5",children:[(0,o.jsx)("input",{className:" w-11/12 h-10 bg-gray-300 justify-center flex p-4 mt-6 outline-none rounded-md text-sm placeholder-gray-700",type:"text",name:"email",placeholder:"Usuario",value:t.email,onChange:p}),c.email&&(0,o.jsxs)("p",{className:" text-red-700 text-sm pl-4 fixed italic whitespace-pre-line",children:[" ",c.email," "]}),(0,o.jsx)("input",{className:" w-11/12 h-10 bg-gray-300 justify-center flex p-4 mt-6 outline-none rounded-md text-sm placeholder-gray-700",type:"password",name:"password",placeholder:"Contrase\xf1a",value:t.password,onChange:p}),c.password&&(0,o.jsxs)("p",{className:" text-red-700 text-sm pl-4 fixed italic whitespace-pre-line",children:[" ",c.password," "]}),(0,o.jsx)("button",{disabled:Object.values(c).some(e=>void 0!==e),className:Object.values(c).some(e=>void 0!==e)?"w-11/12 h-10 mt-6 bg-gray-400 justify-center block text-gray-100 text-sm rounded-md ease-in cursor-not-allowed":"w-11/12 h-10 mt-6 bg-blue-700 justify-center block text-gray-100 text-sm rounded-md ease-in cursor-pointer",type:"submit",children:"INICIAR SESI\xd3N"})]}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)(i.default,{href:"/",className:"text-gray-500 text-sm",children:"\xbfOlvidaste tu contrase\xf1a?"})}),(0,o.jsx)("div",{className:"mt-1 ",children:(0,o.jsxs)("button",{className:" w-10/12 h-10 mt-6 bg-gray-300 flex items-center justify-center text-gray-800 text-sm rounded-3xl ease-in cursor-pointer",onClick:w,children:[(0,o.jsx)(m.default,{className:"mr-2",src:d,alt:"Google Icon",width:20,height:20}),"Iniciar sesi\xf3n con Google"]})})]})})}},1270:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return c},useAuth:function(){return u}});var o=r(7437),a=r(2265),s=r(6463),n=r(277),i=r(5634);let l=(0,a.createContext)({userData:null,setUserData:()=>{},login:()=>{},logout:()=>{},renewToken:()=>{}}),c=e=>{let{children:t}=e,[r,c]=(0,a.useState)(null),u=(0,s.useRouter)();(0,a.useEffect)(()=>{r&&r.tokenData&&((0,n.setCookie)(null,"authToken",r.tokenData.token,{maxAge:2592e3,path:"/"}),localStorage.setItem("userSession",JSON.stringify(r)))},[r]),(0,a.useEffect)(()=>{if(window.localStorage){let e=localStorage.getItem("userSession");e&&c(JSON.parse(e))}let e=e=>{"userSession"===e.key&&(e.newValue?(c(JSON.parse(e.newValue)),u.push("/")):(c(null),localStorage.removeItem("userSession"),(0,n.destroyCookie)(null,"authToken"),window.location.reload()))};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[u]);let[d,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d&&u.push("/dashboard/home")},[d]);let h=()=>{c(null),localStorage.removeItem("userSession"),localStorage.removeItem("selectedCampus"),(0,n.destroyCookie)(null,"authToken"),m(!1),u.push("/")},g=async()=>{if(r&&null!==r.tokenData.keyProperty)try{let e={email:r.userData.email,password:r.tokenData.keyProperty},t={tokenData:{...await (0,i.l)(e),keyProperty:e.password},userData:r.userData};c(t),window.location.reload()}catch(e){console.error("Error renovando el token:",e),h()}};return(0,o.jsx)(l.Provider,{value:{userData:r,setUserData:c,login:e=>{c(e),m(!0)},logout:h,renewToken:g},children:t})},u=()=>(0,a.useContext)(l)},5634:function(e,t,r){"use strict";r.d(t,{GA:function(){return l},JS:function(){return c},QH:function(){return a},l:function(){return n},pH:function(){return i},zm:function(){return s},zr:function(){return u}});var o=r(8472);let a="http://localhost:3000",s="/users/auth0/callback";async function n(e){try{console.log("formData",JSON.stringify(e));let t=await fetch("".concat(a,"/auths/signin"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)}),r=await t.json();if(200===t.status)return r;throw Error(null==r?void 0:r.message)}catch(e){throw Error(e)}}async function i(e,t){try{let r=await fetch("".concat(a,"/users/").concat(e),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),o=await r.json();if(200===r.status)return o;throw Error(null==o?void 0:o.message)}catch(e){throw Error(e)}}let l=async(e,t)=>{try{return(await o.Z.get("http://localhost:3000/users/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(e){if(o.Z.isAxiosError(e)){var r,a;throw console.error("Error en la solicitud Axios:",e.message),Error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Error al obtener los datos del usuario")}throw console.error("Error desconocido:",e),Error("Error desconocido al obtener los datos del usuario")}},c=async(e,t)=>{try{return(await o.Z.delete("http://localhost:3000/users/".concat(e),{headers:{Authorization:"Bearer ".concat(t)}})).data}catch(e){if(o.Z.isAxiosError(e)){var r,a;throw console.error("Error en la solicitud Axios:",e.message),Error((null===(a=e.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||"Error al eliminar el usuario")}throw console.error("Error desconocido:",e),Error("Error desconocido al eliminar el usuario")}},u=async(e,t)=>{try{return(await o.Z.post("http://localhost:3000/auths/signup",e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(e){if(o.Z.isAxiosError(e)){var r;console.error("Error en la creaci\xf3n del usuario:",(null===(r=e.response)||void 0===r?void 0:r.data)||e.message)}else console.error("Error inesperado:",e);throw e}}},7122:function(e){e.exports={imageBackground:"Documentation_imageBackground__7wJH5"}},308:function(e){e.exports={rightComponent:"Login_rightComponent__POfit"}},6665:function(e,t,r){"use strict";r.r(t),t.default={src:"/_next/static/media/Logo01.530fe2b7.png",height:853,width:1050,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAvklEQVR42mM4ffoEIwMQPHlw1/38hQtdW3btmTJz1UYpkNjmXfuZGUBgy/YdcZMXr7wydeWGxoWbdhyfv3bTsdv3H6kwwMCylatPTFi47HH9rNU7epdsuTZp8er/W3ftnc4AAy09U5auWLXye/3MZcv6lm+93Tpv+e3t+w43MCABsa7Js3at3rCxZfu+/d2HTp2t+vX/PycDCGzYtMn70OFDNus3brJes3Zd3u5dO/P37NoeuXXr5vwzZ067AABVeGDvqgIvGgAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:6}}},function(e){e.O(0,[608,461,178,648,138,971,23,744],function(){return e(e.s=7110)}),_N_E=e.O()}]);